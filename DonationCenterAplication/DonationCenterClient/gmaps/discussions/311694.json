[
  {
    "Id": "762216",
    "ThreadId": "311694",
    "Html": "\r\n<p>Hello,</p>\r\n<p>what is the best way to create resizable, dragable marker with shape of rectangle which is created during draging mouse with pressed button?</p>\r\n<p>I was trying to figure out how examples works. I connected circle visual example with custom marker demo to drag shapes over the map - which doesn't work as it should ;).</p>\r\n<p>What will the best to have access to methods which allow me to do think which I want?</p>\r\n<p>&nbsp;</p>\r\n<p>Best regards!</p>\r\n",
    "PostedDate": "2012-02-14T00:39:05.65-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "762221",
    "ThreadId": "311694",
    "Html": "<p>it's ..complicated ;}</p>",
    "PostedDate": "2012-02-14T00:42:48.347-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "762231",
    "ThreadId": "311694",
    "Html": "<p>I think that resizing is the worst part of all of that. I thought that there is some prepared class which can handle it. I can drag rectangle shape over the map and creating rectangle on mouse move will be enough for now.</p>",
    "PostedDate": "2012-02-14T00:51:28.727-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "768317",
    "ThreadId": "311694",
    "Html": "<p>[deleted]</p>",
    "PostedDate": "2012-02-15T13:42:37.997-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "769304",
    "ThreadId": "311694",
    "Html": "<p>From: mike_mankus // restored post, may be&nbsp;helpful&nbsp;anyway...</p>\r\n<p>\"You need to use a polygon and four markers. &nbsp;(i set two to invisable - you need them only to define the polygon) So you'll have a visable marker set to the top-left corner of the polygon and another visable one set to the bottom-right of the polygon.</p>\r\n<p>Then you need to add a listener to the marker event for mousedown. &nbsp;When the user mouse-down's on a marker (from the polygon) you need to set a flag that the mouse is down on a marker and set which marker is selected.. &nbsp;Then you need to add a listener for the mousemove event of the map. &nbsp;If the mouse is moving and the current marker is one of the corners of the polygon AND the mouse is down, then you need to move that marker to the position of the mouse and update the polygon to the new size.</p>\r\n<p>I have it working but my code has alot going on with it. &nbsp;Take from it what you can. &nbsp;When I need a polygon, I add it to the center of the map at a set size. &nbsp;The user can then resize as needed. &nbsp;Works great.\"</p>\r\n<p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">private</span> GMapPolygon polygon;\r\n\r\n<span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> CreatePoly()\r\n{\r\n    GPoint c = MainMap.MapProvider.Projection.FromLatLngToPixel(heatCenter, (<span style=\"color: blue;\">int</span>)MainMap.Zoom);\r\n    <span style=\"color: blue;\">int</span> boxLength = (MainMap.MapProvider.Projection.FromLatLngToPixel(heatTL, (<span style=\"color: blue;\">int</span>)MainMap.Zoom).X - MainMap.MapProvider.Projection.FromLatLngToPixel(heatBR, (<span style=\"color: blue;\">int</span>)MainMap.Zoom).X) / 10;\r\n    GMapMarker m1 = <span style=\"color: blue;\">new</span> GMapMarker(MainMap.MapProvider.Projection.FromPixelToLatLng(c.X - boxLength, c.Y - boxLength, (<span style=\"color: blue;\">int</span>)MainMap.Zoom));\r\n    GMapMarker m2 = <span style=\"color: blue;\">new</span> GMapMarker(MainMap.MapProvider.Projection.FromPixelToLatLng(c.X + boxLength, c.Y - boxLength, (<span style=\"color: blue;\">int</span>)MainMap.Zoom));\r\n    GMapMarker m3 = <span style=\"color: blue;\">new</span> GMapMarker(MainMap.MapProvider.Projection.FromPixelToLatLng(c.X + boxLength, c.Y + boxLength, (<span style=\"color: blue;\">int</span>)MainMap.Zoom));\r\n    GMapMarker m4 = <span style=\"color: blue;\">new</span> GMapMarker(MainMap.MapProvider.Projection.FromPixelToLatLng(c.X - boxLength, c.Y + boxLength, (<span style=\"color: blue;\">int</span>)MainMap.Zoom));\r\n    m1.IsVisible = m3.IsVisible = <span style=\"color: blue;\">true</span>;\r\n    m2.IsVisible = m4.IsVisible = m2.IsHitTestVisible = m4.IsHitTestVisible = <span style=\"color: blue;\">false</span>;\r\n    polygons.Markers.Clear();\r\n    polygons.Markers.Add(m1);\r\n    polygons.Markers.Add(m2);\r\n    polygons.Markers.Add(m3);\r\n    polygons.Markers.Add(m4);\r\n    RegeneratePolygon();\r\n}\r\n\r\n<span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> RegeneratePolygon()\r\n{\r\n    List&lt;PointLatLng&gt; polygonPoints = <span style=\"color: blue;\">new</span> List&lt;PointLatLng&gt;();\r\n\r\n    <span style=\"color: blue;\">foreach</span> (GMapMarker m <span style=\"color: blue;\">in</span> polygons.Markers)\r\n    {\r\n        <span style=\"color: blue;\">if</span> (m <span style=\"color: blue;\">is</span> GMapPolygonMarker)\r\n        {\r\n            m.Tag = polygonPoints.Count;\r\n            polygonPoints.Add(m.Position);\r\n        }\r\n    }\r\n\r\n    <span style=\"color: blue;\">if</span> (polygon == <span style=\"color: blue;\">null</span>)\r\n    {\r\n        polygon = <span style=\"color: blue;\">new</span> GMapPolygon(polygonPoints, <span style=\"color: #a31515;\">\"known source\"</span>);\r\n        polygon.Fill = <span style=\"color: blue;\">new</span> SolidBrush(Color.FromArgb(100, Color.AliceBlue));\r\n        polygons.Polygons.Add(polygon);\r\n    }\r\n    <span style=\"color: blue;\">else</span>\r\n    {\r\n        polygon.Points.Clear();\r\n        polygon.Points.AddRange(polygonPoints);\r\n\r\n        <span style=\"color: blue;\">if</span> (polygons.Polygons.Count == 0)\r\n        {\r\n            polygons.Polygons.Add(polygon);\r\n        }\r\n        <span style=\"color: blue;\">else</span>\r\n        {\r\n            MainMap.UpdatePolygonLocalPosition(polygon);\r\n        }\r\n    }\r\n}\r\n\r\n<span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> MainMap_OnMarkerEnter(GMapMarker item)\r\n{\r\n    <span style=\"color: blue;\">if</span> (polygons.Markers.Contains(item) &amp;&amp; !isDraggingMarker)\r\n        currentMarker = item;\r\n}\r\n\r\n<span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> MainMap_MouseDown(<span style=\"color: blue;\">object</span> sender, MouseEventArgs e)\r\n{\r\n    <span style=\"color: blue;\">if</span> (e.Button == MouseButtons.Left &amp;&amp; currentMarker != <span style=\"color: blue;\">null</span> &amp;&amp; currentMarker.IsMouseOver)\r\n        isDraggingMarker = <span style=\"color: blue;\">true</span>;\r\n}\r\n\r\n<span style=\"color: blue;\">private</span> <span style=\"color: blue;\">void</span> MainMap_MouseMove(<span style=\"color: blue;\">object</span> sender, MouseEventArgs e)\r\n{\r\n    <span style=\"color: blue;\">if</span> (e.Button == MouseButtons.Left &amp;&amp; currentMarker != <span style=\"color: blue;\">null</span> &amp;&amp; isDraggingMarker)\r\n    {\r\n        PointLatLng p = MainMap.FromLocalToLatLng(e.X, e.Y);\r\n        <span style=\"color: blue;\">string</span> lat = GeoCoordinate.Convert(p.Lat, GPSType);\r\n        <span style=\"color: blue;\">string</span> lng = GeoCoordinate.Convert(p.Lng, GPSType);\r\n        mousePos.Text = <span style=\"color: #a31515;\">\"Lat: \"</span> + lat + <span style=\"color: #a31515;\">\"  \"</span> + <span style=\"color: #a31515;\">\"Lng: \"</span> + lng;\r\n\r\n        <span style=\"color: blue;\">if</span> (currentMarker <span style=\"color: blue;\">is</span> GMapPolygonMarker)\r\n        {\r\n            <span style=\"color: blue;\">int</span>? pIndex = (<span style=\"color: blue;\">int</span>?)currentMarker.Tag;\r\n            <span style=\"color: blue;\">if</span> (pIndex.HasValue)\r\n            {\r\n                <span style=\"color: blue;\">if</span> (pIndex &lt; polygon.Points.Count)\r\n                    polygon.Points[pIndex.Value] = p;\r\n\r\n                <span style=\"color: blue;\">if</span> (pIndex.Value == 0 &amp;&amp; pIndex &lt; polygon.Points.Count)\r\n                {\r\n                    GMapMarker m2 = polygons.Markers[1];\r\n                    GMapMarker m4 = polygons.Markers[3];\r\n                    polygons.Markers[1].Position = <span style=\"color: blue;\">new</span> PointLatLng(p.Lat, m2.Position.Lng);\r\n                    polygons.Markers[3].Position = <span style=\"color: blue;\">new</span> PointLatLng(m4.Position.Lat, p.Lng);\r\n                    polygon.Points[1] = polygons.Markers[1].Position;\r\n                    polygon.Points[3] = polygons.Markers[3].Position;\r\n                }\r\n                <span style=\"color: blue;\">else</span> <span style=\"color: blue;\">if</span> (pIndex.Value == 2 &amp;&amp; pIndex &lt; polygon.Points.Count)\r\n                {\r\n                    GMapMarker m2 = polygons.Markers[1];\r\n                    GMapMarker m4 = polygons.Markers[3];\r\n                    polygons.Markers[1].Position = <span style=\"color: blue;\">new</span> PointLatLng(m2.Position.Lat, p.Lng);\r\n                    polygons.Markers[3].Position = <span style=\"color: blue;\">new</span> PointLatLng(p.Lat, m4.Position.Lng);\r\n                    polygon.Points[1] = polygons.Markers[1].Position;\r\n                    polygon.Points[3] = polygons.Markers[3].Position;\r\n                }\r\n                MainMap.UpdatePolygonLocalPosition(polygon);\r\n            }\r\n            currentMarker.Position = p;\r\n        }\r\n                \r\n        MainMap.Refresh();\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n</p>",
    "PostedDate": "2012-02-16T02:34:41.34-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "805431",
    "ThreadId": "311694",
    "Html": "<p>Hello,</p>\r\n<p>&nbsp;</p>\r\n<p>for now I have tried something much more easily. I create area from ploygon using the mechanism of creating rectangle in Core. Then I added some ability to change values from dialog box - resize in manual way, for now.</p>\r\n<p>It's good enough, but in future I will try with mentioned solution by you.</p>\r\n<p>&nbsp;</p>\r\n<p>Regards!&nbsp;</p>",
    "PostedDate": "2012-03-05T03:15:13.383-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]