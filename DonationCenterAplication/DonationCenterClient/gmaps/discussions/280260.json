[
  {
    "Id": "701203",
    "ThreadId": "280260",
    "Html": "\r\n<p>I've just started using GMap, and I have a big problem with this error.</p>\r\n<p>I've downloaded and installed change set&nbsp;<a id=\"ChangeSetLink0\" title=\"View change set c0108a299258\" href=\"http://greatmaps.codeplex.com/SourceControl/changeset/changes/c0108a299258\">c0108a299258</a>. The demo compiles and runs perfectly fine, but\r\n when I implement in my own project, this is when it fails.&nbsp;</p>\r\n<p>In my window, the xaml entry for the map is:</p>\r\n<p>&lt;src:Map Grid.Row=&quot;1&quot; Grid.Column=&quot;2&quot; x:Name=&quot;MainMap&quot; Zoom=&quot;13&quot; MaxZoom=&quot;17&quot; MinZoom=&quot;1&quot; &nbsp;/&gt;</p>\r\n<p>and the codebehind in my Window_Loaded() is:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>MainMap.MapProvider = GMapProviders.OpenStreetMap;\r\nMainMap.Position = <span style=\"color:blue\">new</span> PointLatLng(51.93, -1.43);\r\nMainMap.Zoom = 9;\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>When the program runs, the map opens and is displayed correctly. But after about 1 second the error happens and the debugger stops in GMapControl.cs, on the line</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>Core.tileDrawingListLock.AcquireReaderLock();\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>Indeed tileDrawingListLock is null.</p>\r\n<p>My system is Win7, and the target is .Net 4.0. The downloaded zip was unblocked before installing. I'm sure it is some setting or file that didn't transfer across from the demo correctly, but I can't figure what. Any ideas?</p>\r\n<p>Thanks<br>\r\nTim&nbsp;</p>\r\n",
    "PostedDate": "2011-11-21T06:26:39.64-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701211",
    "ThreadId": "280260",
    "Html": "<p>i'm sure you use latest/unstable code, and thats what you get, use latest release changeset it works fine, or if you have time help me fix it ;}</p>\r\n<p>...can you share your demo source?</p>",
    "PostedDate": "2011-11-21T06:40:50.173-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701226",
    "ThreadId": "280260",
    "Html": "<p>It's more likely to be something I've missed - a wrong library version or similar - than a bug in the code, since the demo runs fine.</p>\r\n<p>I've found the reason tileDrawingListLock is null is because GMapControl_Unloaded gets called. The stack trace doesn't go further back so I don't know why it's being called yet.</p>\r\n<p><br />The project I've put it in is an existing program, where it's replacing (hopefully) a google maps browser control. The project is about 160MB. I can upload it somewhere and give you a link if it comes to it, but I'd rather not. I'll also &nbsp;try another project from scratch and see if the issue persists.</p>",
    "PostedDate": "2011-11-21T06:59:18.72-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701231",
    "ThreadId": "280260",
    "Html": "<p>Unloaded event is called when you close the form with control or change tab item</p>",
    "PostedDate": "2011-11-21T07:07:59.21-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701232",
    "ThreadId": "280260",
    "Html": "<p>Scrub that, I just looked at the changes list for the latest build, and this is exactly the code that changed. So something is calling Unloaded about 1 second after drawing the initial map. I'm happy to investigate further, although I don't really know at this point what I'm looking at...</p>",
    "PostedDate": "2011-11-21T07:08:21.477-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701234",
    "ThreadId": "280260",
    "Html": "<p>Cross-posted there. None of my unload or close functions are being called, although something is calling it. I commented out the event handler assignment in the GMapControl constructor, just to see what would happen, and there is no more error and the control works fine.</p>\r\n<p>So it looks like I need to discover why Unload is being called...</p>",
    "PostedDate": "2011-11-21T07:13:49.947-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701237",
    "ThreadId": "280260",
    "Html": "<p>just put the breakpoint there and check the stacktrace</p>",
    "PostedDate": "2011-11-21T07:22:18.443-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701255",
    "ThreadId": "280260",
    "Html": "<p>Everything above is just [External code], so I can't tell what's calling it.</p>\r\n<p>This is the debug output. I can't see anything that looks obviously like a smoking gun though... The call to Unloaded is highlighted in red.</p>\r\n<p>&nbsp;</p>\r\n<p>\r\n<pre>15:20:14.5 Starting Plan-G, build 3.0.0.17\r\n15:20:14.5 OS is Microsoft Windows NT 6.1.7601 Service Pack 1\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\Plan-G3\\bin\\Debug\\GMap.NET.WindowsPresentation.dll', Symbols loaded.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\Plan-G3\\bin\\Debug\\GMap.NET.Core.dll', Symbols loaded.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\Plan-G3\\bin\\Debug\\System.Data.SqlServerCe.dll'\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_32\\System.Transactions\\v4.0_4.0.0.0__b77a5c561934e089\\System.Transactions.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n15:20:14.7 InitDataFolder\r\n15:20:14.7 Data Source = C:\\Users\\skyhawk\\Documents\\Plan-G Files\\Data\\PlanG3_FSX.sdf\r\n15:20:14.7 Data Source = C:\\Users\\skyhawk\\Documents\\Plan-G Files\\Data\\PlanG3_FS9.sdf\r\n15:20:14.7 Data Source = C:\\Users\\skyhawk\\Documents\\Plan-G Files\\Data\\UserWaypoints.sdf\r\n15:20:14.7 Data Source = C:\\Users\\skyhawk\\Documents\\Plan-G Files\\Data\\MEF.sdf\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Numerics\\v4.0_4.0.0.0__b77a5c561934e089\\System.Numerics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\PresentationFramework.Aero\\v4.0_4.0.0.0__31bf3856ad364e35\\PresentationFramework.Aero.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\PresentationUI\\v4.0_4.0.0.0__31bf3856ad364e35\\PresentationUI.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\WindowsFormsIntegration\\v4.0_4.0.0.0__31bf3856ad364e35\\WindowsFormsIntegration.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\nZoom: 0 -&gt; 2\r\nOnMapSizeChanged, w: 996, h: 434, size: {Width=2, Height=1}\r\n15:20:15.9 Program in: C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\Plan-G3\\bin\\Debug\r\nOnMapSizeChanged, w: 1066, h: 434, size: {Width=3, Height=1}\r\nMapType: None -&gt; OpenStreetMap\r\nZoom: 2 -&gt; 9\r\n15:20:16.0 Data in: C:\\Users\\skyhawk\\Documents\\Plan-G Files\r\nOnMapOpen: 1\r\nadd TileLoader: 0 to GThreadPool\r\nadd TileLoader: 1 to GThreadPool\r\nadd TileLoader: 2 to GThreadPool\r\nadd TileLoader: 3 to GThreadPool\r\nadd TileLoader: 4 to GThreadPool\r\nOnTileLoadStart - at zoom 9, time: 15:20:16.6034986\r\nThread[14] - try load: 9 - {X=254,Y=169}\r\nThread[17] - try load: 9 - {X=250,Y=169}\r\nOnMapSizeChanged, w: 1066, h: 510, size: {Width=3, Height=1}\r\nThread[15] - try load: 9 - {X=256,Y=169}\r\nThread[13] - try load: 9 - {X=251,Y=169}\r\nThread[16] - try load: 9 - {X=255,Y=168}\r\nOnTileLoadStart - at zoom 9, time: 15:20:16.6565016\r\nAssembly.LoadFile: C:\\Users\\skyhawk\\AppData\\Local\\GMap.NET\\DllCache\\SQLite_v74_NET4_x86\\System.Data.SQLite.DLL\r\nOnTileLoadStart - at zoom 9, time: 15:20:16.6795030\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Users\\skyhawk\\AppData\\Local\\GMap.NET\\DllCache\\SQLite_v74_NET4_x86\\System.Data.SQLite.DLL'\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_32\\System.Data.OracleClient\\v4.0_4.0.0.0__b77a5c561934e089\\System.Data.OracleClient.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_32\\System.Web\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Web.dll'\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.Services\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Web.Services.dll'\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_32\\System.EnterpriseServices\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.EnterpriseServices.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_32\\System.EnterpriseServices\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.EnterpriseServices.Wrapper.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.\r\nFreePageSpace in cache: 79.0625MB | 2530 pages\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\Plan-G3\\bin\\Debug\\System.Data.SqlServerCe.Entity.dll'\r\nThread[14] - tile loaded: 32KB, 9 - {X=254,Y=169}\r\nThread[16] - tile loaded: 25KB, 9 - {X=255,Y=168}\r\nThread[14] - try load: 9 - {X=250,Y=169}\r\n'Plan-G3.vshost.exe' (Managed (v4.0.30319)): Loaded 'Anonymously Hosted DynamicMethods Assembly'\r\nInvalidate delta: 1286ms\r\nThread[17] - tile loaded: 32KB, 9 - {X=250,Y=169}\r\nThread[16] - try load: 9 - {X=251,Y=169}\r\nThread[14] - tile loaded: 32KB, 9 - {X=250,Y=169}\r\nThread[16] - tile loaded: 23KB, 9 - {X=251,Y=169}\r\nThread[15] - tile loaded: 28KB, 9 - {X=256,Y=169}\r\nThread[14] - try load: 9 - {X=254,Y=170}\r\nThread[13] - tile loaded: 23KB, 9 - {X=251,Y=169}\r\nThread[17] - try load: 9 - {X=256,Y=169}\r\nThread[15] - try load: 9 - {X=251,Y=170}\r\nThread[16] - try load: 9 - {X=253,Y=169}\r\nThread[17] - tile loaded: 28KB, 9 - {X=256,Y=169}\r\nThread[15] - tile loaded: 32KB, 9 - {X=251,Y=170}\r\nInvalidate delta: 139ms\r\nThread[16] - tile loaded: 32KB, 9 - {X=253,Y=169}\r\nThread[14] - tile loaded: 34KB, 9 - {X=254,Y=170}\r\nThread[16] - try load: 9 - {X=255,Y=169}\r\nThread[17] - try load: 9 - {X=250,Y=170}\r\nThread[15] - try load: 9 - {X=251,Y=168}\r\nThread[17] - tile loaded: 11KB, 9 - {X=250,Y=170}\r\nThread[15] - tile loaded: 17KB, 9 - {X=251,Y=168}\r\nThread[17] - try load: 9 - {X=252,Y=169}\r\nThread[16] - tile loaded: 64KB, 9 - {X=255,Y=169}\r\nThread[14] - try load: 9 - {X=250,Y=168}\r\nThread[17] - tile loaded: 32KB, 9 - {X=252,Y=169}\r\nThread[15] - try load: 9 - {X=253,Y=170}\r\nThread[17] - try load: 9 - {X=256,Y=170}\r\nThread[15] - tile loaded: 20KB, 9 - {X=253,Y=170}\r\nThread[17] - tile loaded: 37KB, 9 - {X=256,Y=170}\r\nInvalidate delta: 131ms\r\nThread[15] - try load: 9 - {X=255,Y=170}\r\nThread[17] - try load: 9 - {X=252,Y=168}\r\nThread[15] - tile loaded: 64KB, 9 - {X=255,Y=170}\r\nThread[16] - try load: 9 - {X=252,Y=170}\r\nThread[17] - tile loaded: 32KB, 9 - {X=252,Y=168}\r\nThread[15] - try load: 9 - {X=256,Y=168}\r\nThread[17] - try load: 9 - {X=253,Y=168}\r\nThread[16] - tile loaded: 32KB, 9 - {X=252,Y=170}\r\nThread[15] - tile loaded: 32KB, 9 - {X=256,Y=168}\r\nThread[16] - Wait 0 - 15:20:17.6935610\r\nThread[17] - tile loaded: 30KB, 9 - {X=253,Y=168}\r\nInvalidate delta: 117ms\r\nThread[14] - tile loaded: 32KB, 9 - {X=250,Y=168}\r\nThread[15] - Wait 1 - 15:20:17.7295630\r\nThread[13] - try load: 9 - {X=254,Y=168}\r\nThread[17] - Wait 2 - 15:20:17.7425638\r\nThread[13] - tile loaded: 32KB, 9 - {X=254,Y=168}\r\nThread[14] - Wait 3 - 15:20:17.7515643\r\nThread[13] - Wait 4 - 15:20:17.7565646\r\nThread[13] - OnTileLoadComplete: 1079ms, MemoryCacheSize: 0.663539886474609MB\r\nInvalidate delta: 141ms\r\nOnMapSizeChanged, w: 1082, h: 548, size: {Width=3, Height=2}\r\nOnTileLoadStart - at zoom 9, time: 15:20:18.6766172\r\nInvalidate delta: 811ms\r\nThread[14] - try load: 9 - {X=255,Y=167}\r\nThread[16] - try load: 9 - {X=253,Y=171}\r\nOnTileLoadStart - at zoom 9, time: 15:20:18.6826175\r\nThread[17] - try load: 9 - {X=253,Y=167}\r\nThread[14] - tile loaded: 32KB, 9 - {X=255,Y=167}\r\nThread[16] - tile loaded: 32KB, 9 - {X=253,Y=171}\r\nThread[13] - try load: 9 - {X=252,Y=171}\r\n<span style=\"color: #ff0000;\">GMapControl_Unloaded</span>\r\nThread[14] - try load: 9 - {X=252,Y=171}\r\nThread[16] - try load: 9 - {X=254,Y=171}\r\nThread[17] - tile loaded: 32KB, 9 - {X=253,Y=167}\r\nOnMapClose: 0\r\nThread[17] - try load: 9 - {X=250,Y=167}\r\nThread[14] - tile loaded: 28KB, 9 - {X=252,Y=171}\r\nThread[16] - tile loaded: 32KB, 9 - {X=254,Y=171}\r\nThread[15] - try load: 9 - {X=253,Y=167}\r\nThread[13] - tile loaded: 28KB, 9 - {X=252,Y=171}\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nCacheEngine: CancelTileCaching...\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nThread[17] - tile loaded: 16KB, 9 - {X=250,Y=167}\r\nOnMapOpen: 1\r\nThread[15] - tile loaded: 32KB, 9 - {X=253,Y=167}\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nThread[16] - ProcessLoadTask: System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 1061\r\nThread[14] - ProcessLoadTask: System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 1061\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nThread[16] - Wait 0 - 15:20:27.9361468\r\nThread[14] - Wait 1 - 15:20:27.9531478\r\nThread[17] - ProcessLoadTask: System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 1061\r\nThread[15] - ProcessLoadTask: System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 1061\r\nThread[13] - ProcessLoadTask: System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 1061\r\nThread[17] - Wait 2 - 15:20:27.9711488\r\nThread[15] - Wait 3 - 15:20:28.0031506\r\nThread[13] - Wait 4 - 15:20:28.0061508\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.WindowsPresentation.dll\r\nA first chance exception of type 'System.NullReferenceException' occurred in GMap.NET.Core.dll\r\nSystem.Transactions Critical: 0 : http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/UnhandledUnhandled exceptionPlan-G3.vshost.exeSystem.NullReferenceException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089Object reference not set to an instance of an object.   at GMap.NET.Internals.Core.ProcessLoadTask() in C:\\Users\\skyhawk\\Documents\\Visual Studio 2010\\Projects\\Plan-G3\\GMap.NET.Core\\GMap.NET.Internals\\Core.cs:line 939\r\n   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n</pre>\r\n</p>",
    "PostedDate": "2011-11-21T07:50:53.213-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701263",
    "ThreadId": "280260",
    "Html": "<p>can you add the breakpoint?</p>",
    "PostedDate": "2011-11-21T07:57:05.79-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "701267",
    "ThreadId": "280260",
    "Html": "<p>Yes I can add the breakpoint.</p>",
    "PostedDate": "2011-11-21T08:00:24.447-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]