[
  {
    "Id": "851173",
    "ThreadId": "360219",
    "Html": "\r\n<p>I have created a new map provider which loads a satellite image from a local file. The image loads OK,\r\n<br>\r\nbut then Gmap.net tiles the same image over and over. At zoom = 1 I get no image displayed.\r\n<br>\r\nI'm hoping someone else has gotten this to work and can help me figure out why this does not work.\r\n<br>\r\nHere are the main code changes in my new provider:</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp; public override PureImage GetTileImage(GPoint pos, int zoom)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string url = MakeTileImageUrl(pos, zoom, LanguageStr);</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return GetTileImageFromFile(url);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //return GetTileImageUsingHttp(url);</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string MakeTileImageUrl(GPoint pos, int zoom, string language)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string sec1 = string.Empty; // after &amp;x=...<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string sec2 = string.Empty; // after &amp;zoom=...<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GetSecureWords(pos, out sec1, out sec2);</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //return string.Format(UrlFormat, UrlFormatServer, GetServerNum(pos, 4), UrlFormatRequest, Version, language, pos.X, sec1, pos.Y, zoom, sec2, Server);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return UrlFormat;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static readonly string UrlFormatServer = &quot;khm&quot;;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static readonly string UrlFormatRequest = &quot;kh&quot;;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //static readonly string UrlFormat = &quot;<a href=\"http://{0}{1}.{10}/{2}/v={3}&hl={4}&x={5}{6}&y={7}&z={8}&s={9\">http://{0}{1}.{10}/{2}/v={3}&amp;hl={4}&amp;x={5}{6}&amp;y={7}&amp;z={8}&amp;s={9</a>}&quot;;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static readonly string UrlFormat = &quot;C:\\\\Users\\\\RICKGOULIAN\\\\Pictures\\\\gilbert.tif&quot;;</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\r\n&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp; <br>\r\n&nbsp;&nbsp; New method in GMapProvider.cs:<br>\r\n&nbsp;&nbsp; <br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public PureImage GetTileImageFromFile(string url)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PureImage ret = null;</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] buff = System.IO.File.ReadAllBytes(url);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.IO.MemoryStream ms = new System.IO.MemoryStream();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ms.Write(buff, 0, buff.Length);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret = TileImageProxy.FromStream(ms);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (ret != null)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret.Data = ms;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ret.Data.Position = 0;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ret;<br>\r\n&nbsp;}</p>\r\n",
    "PostedDate": "2012-06-19T14:44:01.883-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "869795",
    "ThreadId": "360219",
    "Html": "<p>well you load the same tile, so you see the same tile ;}</p>",
    "PostedDate": "2012-07-16T09:07:59.44-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]