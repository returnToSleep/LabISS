[
  {
    "Id": "788330",
    "ThreadId": "335152",
    "Html": "\r\n<p>Hi,</p>\r\n<p>Thanks for making such a wonderful product.</p>\r\n<p>Well, as I have very less knowledge about the coordinate projections, i am finding it difficult to get exact tile positions for the visible area, so as to creat the exact bounding box that might be supported by the OnEarth WMS server.</p>\r\n<p>I am trying to fetch the layer whose capabilities xml is as mentioned below:</p>\r\n<p>&lt;Layer queryable=&quot;0&quot;&gt;&lt;Name&gt;worldwind_dem&lt;/Name&gt;&nbsp; &nbsp; &nbsp; &lt;Title&gt;SRTM derived global elevation, 3 arc-second&lt;/Title&gt;&nbsp; &nbsp; &nbsp; &lt;Abstract&gt; A global elevation model, prepared from the 3 arc-second SRTM\r\n dataset by filling some of the problem areas. Prepared by the NASA Learning Technologies. The default style is scaled to 8 bit, non-linear. It is possible to request the elevation data in meters by the short_int tyle and requesting PNG format. The resulting\r\n PNG file will be a unsigned 16 bit per pixel image. The values are then the elevation in meters. Values are signed 16 bit integers, but PNG will present them as unsigned, leading to a few areas with very large values (65000&#43;) For elevation values in feet,\r\n request PNG format with the style feet_short_int.&nbsp; &nbsp; &nbsp; &lt;/Abstract&gt;&nbsp; &nbsp; &nbsp; &lt;LatLonBoundingBox minx=&quot;-180&quot; miny=&quot;-80&quot; maxx=&quot;180&quot; maxy=&quot;80&quot;/&gt;&nbsp; &nbsp; &nbsp; &lt;Style&gt; &lt;Name&gt;default&lt;/Name&gt; &lt;Title&gt;Default\r\n Elevation Style, scaled to 8 bit using a non-linear function&lt;/Title&gt;&nbsp; &nbsp; &nbsp; &lt;/Style&gt;&nbsp; &nbsp; &nbsp; &lt;Style&gt; &lt;Name&gt;short_int&lt;/Name&gt; &lt;Title&gt;short int elevation values when format is image/png&lt;/Title&gt;&nbsp;\r\n &nbsp; &nbsp; &lt;/Style&gt;&nbsp; &nbsp; &nbsp; &lt;Style&gt; &lt;Name&gt;feet_short_int&lt;/Name&gt; &lt;Title&gt;short int elevation values in feet when format is image/png&lt;/Title&gt;&nbsp; &nbsp; &nbsp; &lt;/Style&gt;&nbsp; &nbsp; &nbsp; &lt;ScaleHint\r\n min=&quot;45&quot; max=&quot;10000&quot; /&gt;&nbsp; &nbsp; &nbsp; &lt;MinScaleDenominator&gt;120000&lt;/MinScaleDenominator&gt;&nbsp; &nbsp; &lt;/Layer&gt;</p>\r\n<p>and GetMap url could be framed like :</p>\r\n<pre><span>http://wms.jpl.nasa.gov/wms.cgi?Service=WMS&amp;VERSION=1.1.1&amp;request=GetMap&amp;layers=worldwind_dem&amp;srs=EPSG:4326&amp;width=300&amp;height=300&amp;format=image/png&amp;styles=short_int&amp;bbox={0},{1},{2},{3}</span>\r\n</pre>\r\n<pre><span><br></span></pre>\r\n<pre><span>I am unable to compute the bounding box that will be supproted by this WMS Server.</span></pre>\r\n<pre><span>I have tried this code in MakeTileImageUrl function</span></pre>\r\n<pre><span><pre><span>var&nbsp;px1&nbsp;=&nbsp;Projection.FromTileXYToPixel(pos);</span>\r\n<span>var&nbsp;px2&nbsp;=&nbsp;px1;</span>\r\n<span>px1.Offset(0,</span>Projection.TileSize.Height);\r\n<span>PointLatLng&nbsp;p1&nbsp;=&nbsp;Projection.FromPixelToLatLng(px1,&nbsp;zoom);</span>\r\n<span>px2.Offset(</span>Projection.TileSize.Width,0);\r\n<span>PointLatLng&nbsp;p2&nbsp;=&nbsp;Projection.FromPixelToLatLng(px2,&nbsp;zoom);</span>\r\n<span>return string.Format(CultureInfo.InvariantCulture,</span>\r\n<span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UrlFormat,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.Lng,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.Lat,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p2.Lng,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p2.Lat,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Projection.TileSize.Width,</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Projection.TileSize.Height);</span></pre>\r\n<br></span></pre>\r\n<pre><span>Please, could anyone help me here to figure out how to calculate the bounding box supported by the WMS service.</span></pre>\r\n<pre><span>Also, Please put some light how I can calculate the exact tile positions for the visible area for the same WMS service.</span></pre>\r\n",
    "PostedDate": "2012-02-21T00:37:12.197-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "788626",
    "ThreadId": "335152",
    "Html": "<p>http://onearth.jpl.nasa.gov/wms.cgi?request=GetMap&amp;layers=global_mosaic&amp;srs=EPSG:4326&amp;format=image/jpeg&amp;styles=&amp;width=512&amp;height=512&amp;bbox=21.796875,54.84375,22.5,55.546875</p>\r\n<p>and i get this:</p>\r\n<p><em>&lt;?xml version='1.0' encoding=\"UTF-8\" standalone=\"no\" ?&gt;</em><br /><em>&lt;!DOCTYPE ServiceExceptionReport SYSTEM \"http://wms.jpl.nasa.gov/exception_1_1_1.dtd \"&gt;</em><br /><em>&lt;ServiceExceptionReport version=\"1.1.1\"&gt;</em><br /><em>&lt;ServiceException&gt;</em><br /><strong><em>This server no longer provides full WMS services!</em></strong><br /><em>&lt;/ServiceException&gt;</em><br /><em>&lt;/ServiceExceptionReport&gt;&nbsp;</em></p>",
    "PostedDate": "2012-02-21T01:43:24.96-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "788830",
    "ThreadId": "335152",
    "Html": "<p>Thanks for the quick reply.&nbsp;</p>\n<p>Well that is what the problem is, some facts found after much research:</p>\n<ol>\n<li>acceptable tile height and width is 300 by 300 only </li>\n<li>not able to find how bounding box is to be calculated. </li>\n</ol>\n<p>Somewhere I found this code and utilized the same for&nbsp;MakeTileImageUrl:</p>\n<pre><span>var</span>&nbsp;num&nbsp;=&nbsp;1&nbsp;&lt;&lt;&nbsp;(11&nbsp;-&nbsp;zoom);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>double</span>&nbsp;MinLatitude&nbsp;=&nbsp;90;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>double</span>&nbsp;MinLongitude&nbsp;=&nbsp;-180;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>var</span>&nbsp;width&nbsp;=&nbsp;300&nbsp;*&nbsp;num&nbsp;*&nbsp;0.00083333333333333339;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>var</span>&nbsp;extentsRect&nbsp;=&nbsp;<span>new</span>&nbsp;<span>Rect</span>(MinLongitude&nbsp;+&nbsp;(width&nbsp;*&nbsp;pos.X),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(MinLatitude&nbsp;-&nbsp;(width&nbsp;*&nbsp;(pos.Y&nbsp;+&nbsp;1))),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width);\n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>return</span>&nbsp;<span>string</span>.Format(<span>CultureInfo</span>.InvariantCulture,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UrlFormat,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extentsRect.Left,</pre>\n<pre>                               extentsRect.Top,</pre>\n<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extentsRect.Right,</pre>\n<pre>                               extentsRect.Bottom,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Projection.TileSize.Width,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Projection.TileSize.Height);</pre>\n<pre>dont know how it works, but the problem is works only for zoom level 2.</pre>\n<pre>After so much search not able to figure out how I can use the wms service.However, somewhere I found the stats matrix for the wms service (might be wrong)</pre>\n<pre>Height: 216000, Index: 0, PixelFormat: Gray16, Resolution: 1, ShiftX: 0, ShiftY: 0, SizeInBytes: 1940406272, TileCountX: 1440, TileCountY: 720, TileHeight: 300, TileWidth: 300, Width: 432000</pre>\n<pre>Height: 108000, Index: 1, PixelFormat: Gray16, Resolution: 2, ShiftX: 0, ShiftY: 0, SizeInBytes: 588640256, TileCountX: 720, TileCountY: 360, TileHeight: 300, TileWidth: 300, Width: 216000</pre>\n<pre>Height: 54000, Index: 2, PixelFormat: Gray16, Resolution: 4, ShiftX: 0, ShiftY: 0, SizeInBytes: 1220901888, TileCountX: 360, TileCountY: 180, TileHeight: 300, TileWidth: 300, Width: 108000</pre>\n<pre>Height: 27000, Index: 3, PixelFormat: Gray16, Resolution: 8, ShiftX: 0, ShiftY: 0, SizeInBytes: 1378967296, TileCountX: 180, TileCountY: 90, TileHeight: 300, TileWidth: 300, Width: 54000</pre>\n<pre>Height: 13500, Index: 4, PixelFormat: Gray16, Resolution: 16, ShiftX: 0, ShiftY: 0, SizeInBytes: 729000000, TileCountX: 90, TileCountY: 45, TileHeight: 300, TileWidth: 300, Width: 27000</pre>\n<pre>Height: 6900, Index: 5, PixelFormat: Gray16, Resolution: 32, ShiftX: 0, ShiftY: 0, SizeInBytes: 186300000, TileCountX: 45, TileCountY: 23, TileHeight: 300, TileWidth: 300, Width: 13500</pre>\n<pre>Height: 3600, Index: 6, PixelFormat: Gray16, Resolution: 64, ShiftX: 0, ShiftY: 0, SizeInBytes: 49680000, TileCountX: 23, TileCountY: 12, TileHeight: 300, TileWidth: 300, Width: 6900</pre>\n<pre>Height: 1800, Index: 7, PixelFormat: Gray16, Resolution: 128, ShiftX: 0, ShiftY: 0, SizeInBytes: 12960000, TileCountX: 12, TileCountY: 6, TileHeight: 300, TileWidth: 300, Width: 3600</pre>\n<pre>Height: 900, Index: 8, PixelFormat: Gray16, Resolution: 256, ShiftX: 0, ShiftY: 0, SizeInBytes: 3240000, TileCountX: 6, TileCountY: 3, TileHeight: 300, TileWidth: 300, Width: 1800</pre>\n<pre>Height: 600, Index: 9, PixelFormat: Gray16, Resolution: 512, ShiftX: 0, ShiftY: 0, SizeInBytes: 1080000, TileCountX: 3, TileCountY: 2, TileHeight: 300, TileWidth: 300, Width: 900</pre>\n<pre>Height: 300, Index: 10, PixelFormat: Gray16, Resolution: 1024, ShiftX: 0, ShiftY: 0, SizeInBytes: 360000, TileCountX: 2, TileCountY: 1, TileHeight: 300, TileWidth: 300, Width: 600<br /></pre>\n<pre>This might be helpful to you.</pre>\n<pre><br /></pre>\n<pre>working url:</pre>\n<pre>http://wms.jpl.nasa.gov/wms.cgi?Service=WMS&amp;VERSION=1.1.1&amp;request=GetMap&amp;layers=worldwind_dem&amp;srs=EPSG:4326&amp;width=300&amp;height=300&amp;format=image/png&amp;styles=short_int&amp;bbox=-12,2,-4,10<br /></pre>\n<pre><br /></pre>\n<pre>Also, I am not able to understand why any bounding box that is contained within -180, -80, 180, 80 should work, but is not.</pre>",
    "PostedDate": "2012-02-21T02:31:05.833-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "790412",
    "ThreadId": "335152",
    "Html": "<p>It seems like I need to write a Projection class for it to work, so that the tile positions can be calculated correctly and therefore the tile bounds for url can be figured out correctly. Can anyone please help me here...</p>",
    "PostedDate": "2012-02-21T08:52:22.563-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]